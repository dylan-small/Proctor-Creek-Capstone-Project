{% load static %}
<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>{%  if title %}{{ title }}{%  else %}Proctor Creek{%  endif %}</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <link rel="stylesheet" href="{% static 'proctor_creek/css/index.css' %}">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    </head>
    <body>
        <div class="container">
            {%  block content %}
            {%  endblock %}
        </div>


        <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-storage.js"></script>

        <script>
            var firebaseConfig = {
                apiKey: "AIzaSyBnh3EsTetGpOzDeGUXuQsT7Q-oF8fu1mU",
                authDomain: "proctor-creek-capstone-project.firebaseapp.com",
                projectId: "proctor-creek-capstone-project",
                storageBucket: "proctor-creek-capstone-project.appspot.com",
                messagingSenderId: "1099094981367",
                appId: "1:1099094981367:web:74525f31783efc681971f2",
                measurementId: "G-04YP1GBKLL"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            firebase.analytics();

            /**
             * This function processes the input image file and outputs to the img tag
             */
            function displayPicPreview(input) {
                document.getElementById('preview').src = window.URL.createObjectURL(input.files[0]);
            }

            /**
             * This function stores the image into Firebase storage
             */
            function storeImage() {
                var storage = firebase.storage();
                var imgFile = document.getElementById("image").files[0];
                var storageRef = storage.ref();
                var imgRef = storageRef.child('Report Images');
                var thisRef = imgRef.child(imgFile.name).put(imgFile);
                thisRef.on('state_changed',
                    (snapshot) => {
                        console.log("Continue.");
                    },

                    (error) => {
                        console.log("ERROR: " + error);
                    },

                    () => {
                        // after image uploads successfully, get the download URL
                        thisRef.snapshot.ref.getDownloadURL().then((downloadURL) => {
                            console.log('File available at', downloadURL);
                            alert("Image upload was sucessful.")
                        });
                    }
                );
            }
        </script>
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
    </body>
</html>
